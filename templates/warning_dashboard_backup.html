<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>⚠️ 警告台 - 燒天警告歷史分析 | BurnSky 燒天預測系統</title>
    <meta name="description" content="燒天預測系統警告台，深度分析警告歷史數據、時間模式、季節性趨勢和預測準確性評估。">
    
         <div class="nav-container">
            <div class="nav-row">
                <a href="/">🏠 首頁</a>
                <a href="/photo-analysis">📸 照片分析</a>
                <a             <a href="/api-docs">📚 API 文檔</a>ref="/warning-dashboard">⚠️ 警告台</a>
                <a href="/ml-test">🤖 ML測試</a>
                <a href="/api-docs">📚 API 文檔</a>
                <a href="/photography-guide">📸 攝影指南</a>
            </div>
            <div class="nav-row">
                <a href="/best-locations">📍 最佳地點</a>
                <a href="/faq">❓ FAQ</a>
                <a href="/weather-terms">📚 天氣術語</a>
                <a href="/terms">📄 條款</a>
                <a href="/privacy">🔒 私隱</a>
            </div>
        </div>圖表庫 -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.0/dist/chart.umd.js"></script>
    
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, sans-serif;
            line-height: 1.6;
            color: #333;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
        }

        .top-nav {
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(10px);
            padding: 10px 0;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
            position: sticky;
            top: 0;
            z-index: 1000;
        }

        .nav-container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 0 20px;
        }

        .nav-row {
            display: flex;
            justify-content: center;
            gap: 15px;
            margin-bottom: 5px;
        }

        .nav-row:last-child {
            margin-bottom: 0;
        }

        .nav-row a {
            text-decoration: none;
            color: #333;
            padding: 8px 15px;
            border-radius: 8px;
            font-weight: 500;
            font-size: 14px;
            transition: all 0.3s ease;
        }

        .nav-row a:hover {
            background: #667eea;
            color: white;
            transform: translateY(-2px);
        }

        .container {
            max-width: 1400px;
            margin: 0 auto;
            padding: 40px 20px;
        }

        h1 {
            text-align: center;
            font-size: 2.5em;
            color: white;
            margin-bottom: 10px;
            text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.3);
        }

        .subtitle {
            text-align: center;
            color: rgba(255, 255, 255, 0.9);
            font-size: 1.2em;
            margin-bottom: 40px;
        }

        .dashboard-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 25px;
            margin-bottom: 30px;
        }

        .dashboard-card {
            background: rgba(255, 255, 255, 0.95);
            border-radius: 20px;
            padding: 30px;
            box-shadow: 0 20px 40px rgba(0, 0, 0, 0.1);
            transition: transform 0.3s ease;
        }

        .dashboard-card:hover {
            transform: translateY(-5px);
        }

        .card-header {
            display: flex;
            align-items: center;
            margin-bottom: 20px;
        }

        .card-icon {
            font-size: 2em;
            margin-right: 15px;
        }

        .card-title {
            font-size: 1.4em;
            font-weight: bold;
            color: #333;
        }

        .stat-large {
            font-size: 3em;
            font-weight: bold;
            color: #667eea;
            text-align: center;
            margin: 20px 0;
        }

        .stat-label {
            text-align: center;
            color: #666;
            font-size: 1.1em;
        }

        .chart-container {
            width: 100%;
            height: 300px;
            margin: 20px 0;
        }

        .warning-item {
            background: #f8f9fa;
            border-radius: 10px;
            padding: 15px;
            margin-bottom: 10px;
            border-left: 4px solid #dc3545;
        }

        .warning-high {
            border-left-color: #dc3545;
        }

        .warning-medium {
            border-left-color: #ffc107;
        }

        .warning-low {
            border-left-color: #28a745;
        }

        .warning-time {
            font-size: 0.9em;
            color: #666;
            margin-bottom: 5px;
        }

        .warning-message {
            font-weight: 500;
            color: #333;
        }

        .insight-list {
            list-style: none;
            padding: 0;
        }

        .insight-list li {
            background: #e9ecef;
            padding: 12px;
            margin-bottom: 8px;
            border-radius: 8px;
            border-left: 4px solid #667eea;
        }

        .accuracy-meter {
            background: #e9ecef;
            border-radius: 20px;
            height: 20px;
            margin: 15px 0;
            overflow: hidden;
        }

        .accuracy-fill {
            height: 100%;
            background: linear-gradient(45deg, #28a745, #20c997);
            border-radius: 20px;
            transition: width 1s ease;
        }

        .trend-indicator {
            display: inline-flex;
            align-items: center;
            padding: 5px 10px;
            border-radius: 15px;
            font-size: 0.9em;
            font-weight: 500;
        }

        .trend-up {
            background: #d4edda;
            color: #155724;
        }

        .trend-down {
            background: #f8d7da;
            color: #721c24;
        }

        .trend-stable {
            background: #d1ecf1;
            color: #0c5460;
        }

        .footer {
            text-align: center;
            background: rgba(0, 0, 0, 0.8);
            color: white;
            padding: 30px 20px;
            margin-top: 40px;
        }

        .footer-links {
            display: flex;
            justify-content: center;
            gap: 20px;
            margin-bottom: 20px;
            flex-wrap: wrap;
        }

        .footer-links a {
            color: #ccc;
            text-decoration: none;
            transition: color 0.3s ease;
        }

        .footer-links a:hover {
            color: #667eea;
        }

        @media (max-width: 768px) {
            .nav-row {
                flex-wrap: wrap;
                gap: 10px;
            }

            .nav-row a {
                font-size: 12px;
                padding: 6px 10px;
            }

            .container {
                padding: 20px 10px;
            }

            .dashboard-grid {
                grid-template-columns: 1fr;
            }

            h1 {
                font-size: 2em;
            }

            .chart-container {
                height: 250px;
            }
        }
    </style>
</head>
<body>
    <nav class="top-nav">
        <div class="nav-container">
            <div class="nav-row">
                <a href="/" class="nav-link">📊 即時數據</a>
                <a href="/history" class="nav-link">� 歷史趨勢</a>
                <a href="/warning" class="nav-link">⚠️ 警告台</a>
            </div>
            <div class="nav-row">
                <a href="/photo-analysis" class="nav-link">📷 照片分析</a>
                <a href="/best-locations" class="nav-link">🏔️ 最佳位置</a>
                <a href="/photography-guide" class="nav-link">📸 攝影指南</a>
            </div>
            <div class="nav-row">
                <a href="/weather-terms" class="nav-link">🌤️ 天氣術語</a>
                <a href="/faq" class="nav-link">❓ 常見問答</a>
                <a href="/api-docs" class="nav-link">� API 文檔</a>
            </div>
        </div>
    </nav>

    <div class="container">
        <h1>⚠️ 警告台</h1>
        <p class="subtitle">燒天預測系統 - 警告歷史分析儀表板</p>

        <!-- 📊 總覽統計 -->
        <div class="dashboard-grid">
            <div class="dashboard-card">
                <div class="card-header">
                    <span class="card-icon">📊</span>
                    <h2 class="card-title">總覽統計</h2>
                </div>
                <div class="stat-large" id="totalWarnings">256</div>
                <div class="stat-label">總警告數量</div>
                <hr style="margin: 20px 0; border: none; border-top: 1px solid #e9ecef;">
                <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 15px; text-align: center;">
                    <div>
                        <div style="font-size: 1.5em; font-weight: bold; color: #dc3545;">87</div>
                        <div style="font-size: 0.9em; color: #666;">高嚴重度</div>
                    </div>
                    <div>
                        <div style="font-size: 1.5em; font-weight: bold; color: #ffc107;">123</div>
                        <div style="font-size: 0.9em; color: #666;">中嚴重度</div>
                    </div>
                </div>
            </div>

            <div class="dashboard-card">
                <div class="card-header">
                    <span class="card-icon">🎯</span>
                    <h2 class="card-title">預測準確性</h2>
                </div>
                <div class="stat-large" style="color: #28a745;">87.3%</div>
                <div class="stat-label">總體準確率</div>
                <div class="accuracy-meter">
                    <div class="accuracy-fill" style="width: 87.3%;"></div>
                </div>
                <div style="text-align: center; color: #666; font-size: 0.9em;">
                    <span class="trend-indicator trend-up">📈 較上月提升 2.1%</span>
                </div>
            </div>

            <div class="dashboard-card">
                <div class="card-header">
                    <span class="card-icon">🕐</span>
                    <h2 class="card-title">時間模式</h2>
                </div>
                <div style="text-align: center; margin: 20px 0;">
                    <div style="font-size: 1.8em; font-weight: bold; color: #667eea;">18:30-19:00</div>
                    <div style="color: #666; margin-bottom: 15px;">最高警告時段</div>
                    <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 10px; font-size: 0.9em;">
                        <div>週末: <strong>68%</strong></div>
                        <div>工作日: <strong>42%</strong></div>
                    </div>
                </div>
            </div>

            <div class="dashboard-card">
                <div class="card-header">
                    <span class="card-icon">🌱</span>
                    <h2 class="card-title">季節性趨勢</h2>
                </div>
                <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 15px; text-align: center;">
                    <div>
                        <div style="font-size: 1.2em; font-weight: bold; color: #ff6b6b;">冬季</div>
                        <div style="color: #666;">45% 燒天機率</div>
                    </div>
                    <div>
                        <div style="font-size: 1.2em; font-weight: bold; color: #4ecdc4;">夏季</div>
                        <div style="color: #666;">23% 燒天機率</div>
                    </div>
                </div>
                <div style="margin-top: 15px; text-align: center;">
                    <span class="trend-indicator trend-up">📈 當前季節趨勢良好</span>
                </div>
            </div>
        </div>

        <!-- 📈 警告時間軸 -->
        <div class="dashboard-card" style="margin-bottom: 30px;">
            <div class="card-header">
                <span class="card-icon">📈</span>
                <h2 class="card-title">警告時間軸</h2>
            </div>
            <div class="chart-container">
                <canvas id="warningTimelineChart"></canvas>
            </div>
        </div>

        <!-- ⚠️ 嚴重程度分析 -->
        <div class="dashboard-grid">
            <div class="dashboard-card">
                <div class="card-header">
                    <span class="card-icon">⚠️</span>
                    <h2 class="card-title">嚴重程度分析</h2>
                </div>
                <div class="chart-container">
                    <canvas id="severityChart"></canvas>
                </div>
            </div>

            <div class="dashboard-card">
                <div class="card-header">
                    <span class="card-icon">💡</span>
                    <h2 class="card-title">數據洞察與建議</h2>
                </div>
                <ul class="insight-list">
                    <li>冬季月份 (12-2月) 燒天機率最高，建議重點關注</li>
                    <li>下午 6:30-7:00 是燒天預警高峰時段</li>
                    <li>濕度 60-80% 範圍內燒天發生機率增加 35%</li>
                    <li>東北風天氣型態下燒天預測準確率達 91%</li>
                    <li>建議在預測評分 >70 時提前 30 分鐘前往拍攝地點</li>
                </ul>
            </div>
        </div>

        <!-- 🔥 高影響警告 -->
        <div class="dashboard-card" style="margin-bottom: 30px;">
            <div class="card-header">
                <span class="card-icon">🔥</span>
                <h2 class="card-title">近期高影響警告</h2>
            </div>
            <div class="warning-item warning-high">
                <div class="warning-time">2024-12-28 18:45</div>
                <div class="warning-message">極佳燒天條件：預測評分 95/100，持續時間 25 分鐘</div>
            </div>
            <div class="warning-item warning-high">
                <div class="warning-time">2024-12-25 19:10</div>
                <div class="warning-message">聖誕節燒天盛宴：預測評分 92/100，覆蓋全港</div>
            </div>
            <div class="warning-item warning-medium">
                <div class="warning-time">2024-12-22 18:30</div>
                <div class="warning-message">中等燒天條件：預測評分 78/100，建議西區拍攝</div>
            </div>
            <div class="warning-item warning-medium">
                <div class="warning-time">2024-12-20 19:05</div>
                <div class="warning-message">局部燒天現象：預測評分 71/100，維港東部較佳</div>
            </div>
        </div>
    </div>

    <footer class="footer">
        <div class="footer-links">
            <a href="/">🏠 首頁</a>
            <a href="/photo-analysis">📸 照片分析</a>
            <a href="/warning-dashboard">⚠️ 警告台</a>
            <a href="/ml-test">🤖 ML測試</a>
            <a href="/api-docs">� API 文檔</a>
            <a href="/photography-guide">📸 攝影指南</a>
            <a href="/best-locations">📍 最佳地點</a>
            <a href="/faq">❓ FAQ</a>
            <a href="/weather-terms">📚 天氣術語</a>
            <a href="/terms">📄 條款</a>
            <a href="/privacy">🔒 私隱</a>
        </div>
        <p>&copy; 2024 BurnSky 燒天預測系統. 為攝影愛好者提供精準的火燒雲預測服務.</p>
    </footer>

    <script>
        // 全局變數存儲數據和圖表
        let dashboardData = null;
        let timelineChart = null;
        let severityChart = null;

        // 獲取警告台數據
        async function loadDashboardData() {
            try {
                console.log('正在載入警告台數據...');
                const response = await fetch('/api/warning-dashboard-data');
                console.log('API 回應狀態:', response.status);
                
                if (!response.ok) {
                    throw new Error(`HTTP error! status: ${response.status}`);
                }
                
                dashboardData = await response.json();
                console.log('成功獲取數據:', dashboardData);
                
                // 更新頁面內容
                updateOverviewStats();
                updateAccuracySection();
                updateTimePattern();
                updateSeasonalTrends();
                updateCharts();
                updateHighImpactWarnings();
                updateInsights();
                
                console.log('所有數據更新完成');
                
            } catch (error) {
                console.error('載入警告台數據失敗:', error);
                console.log('使用靜態數據作為備份');
                // 使用靜態數據作為備份
                loadStaticData();
            }
        }

        // 更新總覽統計
        function updateOverviewStats() {
            if (!dashboardData) return;
            
            const overview = dashboardData.overview;
            document.getElementById('totalWarnings').textContent = overview.total_warnings;
            
            // 更新高嚴重度和中嚴重度數據
            const highSeverityEl = document.querySelector('[style*="color: #dc3545"]');
            const mediumSeverityEl = document.querySelector('[style*="color: #ffc107"]');
            
            if (highSeverityEl) {
                highSeverityEl.textContent = overview.high_warnings;
            }
            if (mediumSeverityEl) {
                mediumSeverityEl.textContent = overview.medium_warnings;
            }
        }

        // 更新準確性數據
        function updateAccuracySection() {
            if (!dashboardData) return;
            
            const accuracy = dashboardData.accuracy;
            const accuracyEl = document.querySelector('.stat-large[style*="color: #28a745"]');
            const accuracyFill = document.querySelector('.accuracy-fill');
            const trendEl = document.querySelector('.trend-indicator');
            
            if (accuracyEl) {
                accuracyEl.textContent = accuracy.percentage + '%';
            }
            if (accuracyFill) {
                accuracyFill.style.width = accuracy.percentage + '%';
            }
            if (trendEl) {
                const trendText = accuracy.trend === 'up' ? '📈 較上月提升 2.1%' : '📊 保持穩定';
                trendEl.textContent = trendText;
                trendEl.className = accuracy.trend === 'up' ? 'trend-indicator trend-up' : 'trend-indicator trend-stable';
            }
        }

        // 更新時間模式
        function updateTimePattern() {
            if (!dashboardData) return;
            
            const timePattern = dashboardData.time_pattern;
            const peakHourEl = document.querySelector('div[style*="font-size: 1.8em"]');
            
            // 使用更安全的方式查找包含特定文字的元素
            const allDivs = document.querySelectorAll('div');
            let weekendEl = null;
            let weekdayEl = null;
            
            for (let div of allDivs) {
                if (div.textContent && div.textContent.includes('週末:')) {
                    weekendEl = div;
                }
                if (div.textContent && div.textContent.includes('工作日:')) {
                    weekdayEl = div;
                }
            }
            
            if (peakHourEl) {
                peakHourEl.textContent = timePattern.peak_hour;
            }
            
            // 可以在這裡更新週末和工作日數據，如果找到對應元素
            // if (weekendEl) { weekendEl.textContent = `週末: ${timePattern.weekend_ratio}%`; }
            // if (weekdayEl) { weekdayEl.textContent = `工作日: ${timePattern.weekday_ratio}%`; }
        }

        // 更新季節性趨勢
        function updateSeasonalTrends() {
            if (!dashboardData) return;
            
            const seasonal = dashboardData.seasonal;
            const winterEl = document.querySelector('div[style*="color: #ff6b6b"] + div');
            const summerEl = document.querySelector('div[style*="color: #4ecdc4"] + div');
            
            if (winterEl) {
                winterEl.textContent = seasonal.winter_probability + '% 燒天機率';
            }
            if (summerEl) {
                summerEl.textContent = seasonal.summer_probability + '% 燒天機率';
            }
        }

        // 更新圖表
        function updateCharts() {
            if (!dashboardData) return;
            
            // 警告時間軸圖表
            const timelineCtx = document.getElementById('warningTimelineChart').getContext('2d');
            
            const monthLabels = dashboardData.monthly_timeline.map(item => item.month);
            const totalData = dashboardData.monthly_timeline.map(item => item.total);
            const highData = dashboardData.monthly_timeline.map(item => item.high);
            
            if (timelineChart) {
                timelineChart.destroy();
            }
            
            timelineChart = new Chart(timelineCtx, {
                type: 'line',
                data: {
                    labels: monthLabels,
                    datasets: [{
                        label: '警告數量',
                        data: totalData,
                        borderColor: '#667eea',
                        backgroundColor: 'rgba(102, 126, 234, 0.1)',
                        fill: true,
                        tension: 0.4
                    }, {
                        label: '高嚴重度警告',
                        data: highData,
                        borderColor: '#dc3545',
                        backgroundColor: 'rgba(220, 53, 69, 0.1)',
                        fill: false,
                        tension: 0.4
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        legend: {
                            position: 'top',
                        }
                    },
                    scales: {
                        y: {
                            beginAtZero: true,
                            grid: {
                                color: 'rgba(0,0,0,0.1)'
                            }
                        },
                        x: {
                            grid: {
                                color: 'rgba(0,0,0,0.1)'
                            }
                        }
                    }
                }
            });

            // 嚴重程度分析圖表
            const severityCtx = document.getElementById('severityChart').getContext('2d');
            
            if (severityChart) {
                severityChart.destroy();
            }
            
            severityChart = new Chart(severityCtx, {
                type: 'doughnut',
                data: {
                    labels: ['高嚴重度', '中嚴重度', '低嚴重度'],
                    datasets: [{
                        data: [
                            dashboardData.overview.high_warnings,
                            dashboardData.overview.medium_warnings,
                            dashboardData.overview.low_warnings
                        ],
                        backgroundColor: [
                            '#dc3545',
                            '#ffc107',
                            '#28a745'
                        ],
                        borderWidth: 2,
                        borderColor: '#fff'
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        legend: {
                            position: 'bottom'
                        }
                    }
                }
            });
        }

        // 更新高影響警告
        function updateHighImpactWarnings() {
            if (!dashboardData) return;
            
            // 使用更安全的方式查找容器
            let warningsContainer = null;
            const h2Elements = document.querySelectorAll('.dashboard-card h2');
            
            for (let h2 of h2Elements) {
                if (h2.textContent && h2.textContent.includes('近期高影響警告')) {
                    warningsContainer = h2.parentNode.parentNode;
                    break;
                }
            }
            
            if (!warningsContainer) {
                console.error('找不到高影響警告容器');
                return;
            }
            
            const existingWarnings = warningsContainer.querySelectorAll('.warning-item');
            existingWarnings.forEach(item => item.remove());
            
            dashboardData.high_impact_warnings.forEach(warning => {
                const warningDiv = document.createElement('div');
                warningDiv.className = `warning-item ${warning.severity_class}`;
                warningDiv.innerHTML = `
                    <div class="warning-time">${warning.time}</div>
                    <div class="warning-message">${warning.message}</div>
                `;
                warningsContainer.appendChild(warningDiv);
            });
        }

        // 更新數據洞察
        function updateInsights() {
            if (!dashboardData) return;
            
            const insightsList = document.querySelector('.insight-list');
            insightsList.innerHTML = '';
            
            dashboardData.insights.forEach(insight => {
                const li = document.createElement('li');
                li.textContent = insight;
                insightsList.appendChild(li);
            });
        }

        // 靜態數據備份
        function loadStaticData() {
            dashboardData = {
                overview: {
                    total_warnings: 256,
                    high_warnings: 87,
                    medium_warnings: 123,
                    low_warnings: 46
                },
                accuracy: {
                    percentage: 87.3,
                    trend: 'up'
                },
                time_pattern: {
                    peak_hour: '18:30-19:00',
                    weekend_ratio: 68,
                    weekday_ratio: 42
                },
                seasonal: {
                    winter_probability: 45,
                    summer_probability: 23,
                    current_trend: 'up'
                },
                monthly_timeline: [
                    {month: '1月', total: 45, high: 18},
                    {month: '2月', total: 52, high: 22},
                    {month: '3月', total: 38, high: 15},
                    {month: '4月', total: 25, high: 8},
                    {month: '5月', total: 18, high: 5},
                    {month: '6月', total: 12, high: 3},
                    {month: '7月', total: 8, high: 2},
                    {month: '8月', total: 15, high: 4},
                    {month: '9月', total: 22, high: 7},
                    {month: '10月', total: 35, high: 12},
                    {month: '11月', total: 42, high: 16},
                    {month: '12月', total: 48, high: 19}
                ],
                high_impact_warnings: [
                    {
                        time: '2024-12-28 18:45',
                        message: '極佳燒天條件：預測評分 95/100，持續時間 25 分鐘',
                        severity_class: 'warning-high'
                    },
                    {
                        time: '2024-12-25 19:10',
                        message: '聖誕節燒天盛宴：預測評分 92/100，覆蓋全港',
                        severity_class: 'warning-high'
                    },
                    {
                        time: '2024-12-22 18:30',
                        message: '中等燒天條件：預測評分 78/100，建議西區拍攝',
                        severity_class: 'warning-medium'
                    },
                    {
                        time: '2024-12-20 19:05',
                        message: '局部燒天現象：預測評分 71/100，維港東部較佳',
                        severity_class: 'warning-medium'
                    }
                ],
                insights: [
                    "冬季月份 (12-2月) 燒天機率最高，建議重點關注",
                    "下午 6:30-7:00 是燒天預警高峰時段",
                    "濕度 60-80% 範圍內燒天發生機率增加 35%",
                    "東北風天氣型態下燒天預測準確率達 91%",
                    "建議在預測評分 >70 時提前 30 分鐘前往拍攝地點"
                ]
            };
            
            updateOverviewStats();
            updateAccuracySection();
            updateTimePattern();
            updateSeasonalTrends();
            updateCharts();
            updateHighImpactWarnings();
            updateInsights();
        }

        // 數字動畫效果
        function animateNumbers() {
            const statNumbers = document.querySelectorAll('.stat-large');
            statNumbers.forEach(stat => {
                const finalValue = parseFloat(stat.textContent);
                let currentValue = 0;
                const increment = finalValue / 50;
                
                const timer = setInterval(() => {
                    currentValue += increment;
                    if (currentValue >= finalValue) {
                        currentValue = finalValue;
                        clearInterval(timer);
                    }
                    
                    if (stat.textContent.includes('%')) {
                        stat.textContent = currentValue.toFixed(1) + '%';
                    } else {
                        stat.textContent = Math.floor(currentValue);
                    }
                }, 50);
            });
        }

        // 卡片進場動畫
        function animateCards() {
            const cards = document.querySelectorAll('.dashboard-card');
            cards.forEach((card, index) => {
                card.style.opacity = '0';
                card.style.transform = 'translateY(20px)';
                
                setTimeout(() => {
                    card.style.transition = 'all 0.6s ease';
                    card.style.opacity = '1';
                    card.style.transform = 'translateY(0)';
                }, index * 100);
            });
        }

        // 頁面加載完成後執行
        document.addEventListener('DOMContentLoaded', function() {
            console.log('頁面 DOM 載入完成');
            
            // 檢查 Chart.js 是否載入
            if (typeof Chart === 'undefined') {
                console.error('❌ Chart.js 未載入');
                return;
            }
            console.log('✅ Chart.js 已載入');
            
            // 檢查圖表元素是否存在
            const timelineElement = document.getElementById('warningTimelineChart');
            const severityElement = document.getElementById('severityChart');
            
            if (!timelineElement) {
                console.error('❌ warningTimelineChart 元素未找到');
            } else {
                console.log('✅ warningTimelineChart 元素存在');
            }
            
            if (!severityElement) {
                console.error('❌ severityChart 元素未找到');
            } else {
                console.log('✅ severityChart 元素存在');
            }
            
            // 載入數據
            loadDashboardData();
            
            // 啟動動畫
            setTimeout(() => {
                animateNumbers();
                animateCards();
            }, 100);
        });
    </script>
</body>
</html>
