# 燒天預測因子權重分析報告

**分析日期：** 2025-01-27  
**專案：** 燒天預測系統 (BurnSky API)  
**目的：** 分析各個因子在燒天預測中的比重是否合理，並提出優化建議

---

## 📊 當前權重分配現況

### 總分配額：140分

| 因子 | 分數 | 比重 | 重要性等級 |
|------|------|------|------------|
| 雲層因子 | 30分 | 21.4% | ⭐⭐⭐⭐⭐ 極高 |
| 濕度因子 | 22分 | 15.7% | ⭐⭐⭐⭐ 高 |
| 時間因子 | 18分 | 12.9% | ⭐⭐⭐⭐ 高 |
| 溫度因子 | 18分 | 12.9% | ⭐⭐⭐ 中高 |
| 能見度因子 | 18分 | 12.9% | ⭐⭐⭐ 中高 |
| UV指數因子 | 12分 | 8.6% | ⭐⭐ 中 |
| 空氣品質因子 | 12分 | 8.6% | ⭐⭐ 中 |
| 風速因子 | 10分 | 7.1% | ⭐ 中低 |

---

## 🔍 因子重要性深度分析

### 1. 雲層因子 (30分, 21.4%)
- **重要性：** ⭐⭐⭐⭐⭐ 極高
- **現狀評估：** 權重合理但可再提升
- **科學依據：** 雲層是決定燒天現象的最關鍵因素，直接影響光線散射、顏色層次和燒天強度
- **建議權重：** 25-35% (**目前偏低**)

### 2. 濕度因子 (22分, 15.7%)
- **重要性：** ⭐⭐⭐⭐ 高
- **現狀評估：** 權重適中
- **科學依據：** 濕度影響大氣透明度、色彩飽和度和光線傳播效果
- **建議權重：** 15-20% (**目前合理**)

### 3. 時間因子 (18分, 12.9%)
- **重要性：** ⭐⭐⭐⭐ 高
- **現狀評估：** 權重略低
- **科學依據：** 日出日落時間決定太陽角度和最佳光線品質時段
- **建議權重：** 15-20% (**建議提升**)

### 4. 溫度因子 (18分, 12.9%)
- **重要性：** ⭐⭐⭐ 中高
- **現狀評估：** 權重偏高
- **科學依據：** 溫度影響大氣穩定性和熱對流，但非直接決定因素
- **建議權重：** 12-18% (**建議調降**)

### 5. 能見度因子 (18分, 12.9%)
- **重要性：** ⭐⭐⭐ 中高
- **現狀評估：** 權重偏高
- **科學依據：** 能見度影響燒天清晰度，但與空氣品質因子功能重疊
- **建議權重：** 12-18% (**建議調降**)

### 6. 空氣品質因子 (12分, 8.6%)
- **重要性：** ⭐⭐ 中
- **現狀評估：** 權重合理但功能重疊
- **科學依據：** 空氣品質影響透明度，但與能見度因子功能重疊度高
- **建議權重：** 8-12% (**建議降低避免重疊**)

### 7. UV指數因子 (12分, 8.6%)
- **重要性：** ⭐⭐ 中
- **現狀評估：** 權重合理
- **科學依據：** UV指數反映陽光強度，影響燒天亮度和色溫
- **建議權重：** 8-12% (**目前合理**)

### 8. 風速因子 (10分, 7.1%)
- **重要性：** ⭐ 中低
- **現狀評估：** 權重略高
- **科學依據：** 風速影響雲層流動速度，但對燒天整體影響相對較小
- **建議權重：** 5-10% (**建議微調**)

---

## 💡 權重優化建議方案

### 建議新分配 (總分：130分)

| 因子 | 當前分數 | 建議分數 | 變化 | 新比重 |
|------|----------|----------|------|--------|
| 雲層因子 | 30分 | **35分** | +5 | 26.9% ⬆️ |
| 時間因子 | 18分 | **20分** | +2 | 15.4% ⬆️ |
| 濕度因子 | 22分 | **20分** | -2 | 15.4% ⬇️ |
| 溫度因子 | 18分 | **15分** | -3 | 11.5% ⬇️ |
| 能見度因子 | 18分 | **15分** | -3 | 11.5% ⬇️ |
| UV指數因子 | 12分 | **10分** | -2 | 7.7% ⬇️ |
| 空氣品質因子 | 12分 | **8分** | -4 | 6.2% ⬇️ |
| 風速因子 | 10分 | **7分** | -3 | 5.4% ⬇️ |

### 🎯 調整理由詳解

1. **雲層因子 (30→35分)**
   - 理由：燒天現象核心決定因素
   - 影響：提升對雲層類型、厚度、分佈的敏感度
   - 預期效果：更準確識別理想雲層條件

2. **時間因子 (18→20分)**
   - 理由：黃金時段是燒天的必要條件
   - 影響：提升對最佳拍攝時間的精準度
   - 預期效果：減少非最佳時段的誤判

3. **空氣品質因子 (12→8分)**
   - 理由：與能見度因子功能重疊度高
   - 影響：避免雙重計分，提升算法效率
   - 預期效果：消除冗餘評估

4. **溫度/能見度因子 (18→15分)**
   - 理由：重要但非核心決定因素
   - 影響：維持影響力但不過度權重
   - 預期效果：平衡各因子貢獻度

---

## 📈 實測數據分析

### 當前預測結果 (2025-01-27 測試)
- **燒天總分：** 82.5分
- **傳統算法分數：** 82分
- **機器學習分數：** 0分 (異常)

### 各因子實際得分
| 因子 | 得分 | 最高分 | 得分率 |
|------|------|--------|--------|
| 時間因子 | 4分 | 18分 | 22.2% |
| 溫度因子 | 18分 | 18分 | 100% |
| 濕度因子 | 16分 | 22分 | 72.7% |
| 能見度因子 | 12分 | 18分 | 66.7% |
| 雲層因子 | 20分 | 30分 | 66.7% |
| UV指數因子 | 0分 | 12分 | 0% |
| 風速因子 | 0分 | 10分 | 0% |
| 空氣品質因子 | 12分 | 12分 | 100% |

### 🔍 觀察發現
1. **溫度因子滿分** - 可能過於寬鬆，建議收緊評分標準
2. **空氣品質滿分** - CSDI整合成功，數據源穩定
3. **UV/風速零分** - 可能數據獲取異常或評分標準過嚴
4. **時間因子低分** - 測試時間非黃金時段，符合預期

---

## 🚀 實施建議

### 階段一：權重調整 (即時可做)
1. 修改 `predictor.py` 中的權重分配
2. 實施建議的新分配方案
3. 進行基礎功能測試

### 階段二：數據驗證 (1-2週)
1. 收集調整前後的預測數據
2. 對比實際燒天現象與預測準確率
3. 記錄用戶反馈和滿意度

### 階段三：A/B測試 (2-4週)
1. 並行運行舊版和新版算法
2. 統計準確率差異
3. 根據測試結果決定最終權重

### 階段四：機器學習優化 (長期)
1. 收集足夠的標註數據
2. 重新訓練ML模型
3. 優化傳統算法與ML的融合比例

---

## ⚠️ 風險與注意事項

### 潛在風險
1. **過度調整風險** - 權重變化可能影響現有穩定性
2. **地域差異** - 香港特有的氣候條件需要本地化調整
3. **季節變化** - 不同季節的最佳權重可能不同

### 緩解措施
1. **漸進式調整** - 分階段小幅調整權重
2. **回滾機制** - 保留舊版本算法作為備用
3. **持續監控** - 實時監測預測準確率變化

### 數據品質要求
1. **空氣品質數據** - 確保CSDI API穩定性
2. **機器學習模型** - 修復ML預測異常問題
3. **UV/風速數據** - 檢查數據獲取流程

---

## 📋 結論與下一步

### 核心結論
1. **當前權重分配基本合理**，但仍有優化空間
2. **雲層因子應該獲得更高權重** (21.4% → 26.9%)
3. **空氣品質與能見度存在功能重疊**，需要調整
4. **機器學習模型需要修復**，當前貢獻為0

### 優先級排序
1. **高優先級：** 調整雲層和時間因子權重
2. **中優先級：** 降低重疊因子權重
3. **低優先級：** 修復ML模型和數據獲取異常

### 預期改善效果
- **準確率提升：** 5-10%
- **用戶體驗：** 減少誤判，提升信任度
- **系統穩定性：** 降低因子間冗餘度

---

**報告撰寫：** BurnSky Team  
**最後更新：** 2025-01-27  
**下次檢討：** 2025-02-10
